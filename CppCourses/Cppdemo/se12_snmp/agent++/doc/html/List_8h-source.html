<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>AGENT++: List.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>List.h</h1><a href="List_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*_############################################################################</span>
00002 <span class="comment">  _## </span>
00003 <span class="comment">  _##  List.h  </span>
00004 <span class="comment">  _## </span>
00005 <span class="comment">  _##</span>
00006 <span class="comment">  _##  AGENT++ API Version 3.5.22c</span>
00007 <span class="comment">  _##  -----------------------------------------------</span>
00008 <span class="comment">  _##  Copyright (C) 2000-2004 Frank Fock, Jochen Katz</span>
00009 <span class="comment">  _##  </span>
00010 <span class="comment">  _##  LICENSE AGREEMENT</span>
00011 <span class="comment">  _##</span>
00012 <span class="comment">  _##  WHEREAS,  Frank  Fock  and  Jochen  Katz  are  the  owners of valuable</span>
00013 <span class="comment">  _##  intellectual  property rights relating to  the AGENT++ API and wish to</span>
00014 <span class="comment">  _##  license AGENT++ subject to the  terms and conditions set forth  below;</span>
00015 <span class="comment">  _##  and</span>
00016 <span class="comment">  _##</span>
00017 <span class="comment">  _##  WHEREAS, you ("Licensee") acknowledge  that Frank Fock and Jochen Katz</span>
00018 <span class="comment">  _##  have the right  to grant licenses  to the intellectual property rights</span>
00019 <span class="comment">  _##  relating to  AGENT++, and that you desire  to obtain a license  to use</span>
00020 <span class="comment">  _##  AGENT++ subject to the terms and conditions set forth below;</span>
00021 <span class="comment">  _##</span>
00022 <span class="comment">  _##  Frank  Fock    and Jochen   Katz   grants  Licensee  a  non-exclusive,</span>
00023 <span class="comment">  _##  non-transferable, royalty-free  license  to use   AGENT++ and  related</span>
00024 <span class="comment">  _##  materials without  charge provided the Licensee  adheres to all of the</span>
00025 <span class="comment">  _##  terms and conditions of this Agreement.</span>
00026 <span class="comment">  _##</span>
00027 <span class="comment">  _##  By downloading, using, or  copying  AGENT++  or any  portion  thereof,</span>
00028 <span class="comment">  _##  Licensee  agrees to abide  by  the intellectual property  laws and all</span>
00029 <span class="comment">  _##  other   applicable laws  of  Germany,  and  to all of   the  terms and</span>
00030 <span class="comment">  _##  conditions  of this Agreement, and agrees  to take all necessary steps</span>
00031 <span class="comment">  _##  to  ensure that the  terms and  conditions of  this Agreement are  not</span>
00032 <span class="comment">  _##  violated  by any person  or entity under the  Licensee's control or in</span>
00033 <span class="comment">  _##  the Licensee's service.</span>
00034 <span class="comment">  _##</span>
00035 <span class="comment">  _##  Licensee shall maintain  the  copyright and trademark  notices  on the</span>
00036 <span class="comment">  _##  materials  within or otherwise  related   to AGENT++, and  not  alter,</span>
00037 <span class="comment">  _##  erase, deface or overprint any such notice.</span>
00038 <span class="comment">  _##</span>
00039 <span class="comment">  _##  Except  as specifically   provided in  this  Agreement,   Licensee  is</span>
00040 <span class="comment">  _##  expressly   prohibited  from  copying,   merging,  selling,   leasing,</span>
00041 <span class="comment">  _##  assigning,  or  transferring  in  any manner,  AGENT++ or  any portion</span>
00042 <span class="comment">  _##  thereof.</span>
00043 <span class="comment">  _##</span>
00044 <span class="comment">  _##  Licensee may copy materials   within or otherwise related   to AGENT++</span>
00045 <span class="comment">  _##  that bear the author's copyright only  as required for backup purposes</span>
00046 <span class="comment">  _##  or for use solely by the Licensee.</span>
00047 <span class="comment">  _##</span>
00048 <span class="comment">  _##  Licensee may  not distribute  in any  form  of electronic  or  printed</span>
00049 <span class="comment">  _##  communication the  materials  within or  otherwise  related to AGENT++</span>
00050 <span class="comment">  _##  that  bear the author's  copyright, including  but  not limited to the</span>
00051 <span class="comment">  _##  source   code, documentation,  help  files, examples,  and benchmarks,</span>
00052 <span class="comment">  _##  without prior written consent from the authors.  Send any requests for</span>
00053 <span class="comment">  _##  limited distribution rights to fock@agentpp.com.</span>
00054 <span class="comment">  _##</span>
00055 <span class="comment">  _##  Licensee  hereby  grants  a  royalty-free  license  to  any  and   all </span>
00056 <span class="comment">  _##  derivatives  based  upon this software  code base,  that  may  be used</span>
00057 <span class="comment">  _##  as a SNMP  agent development  environment or a  SNMP agent development </span>
00058 <span class="comment">  _##  tool.</span>
00059 <span class="comment">  _##</span>
00060 <span class="comment">  _##  Licensee may  modify  the sources  of AGENT++ for  the Licensee's  own</span>
00061 <span class="comment">  _##  purposes.  Thus, Licensee  may  not  distribute  modified  sources  of</span>
00062 <span class="comment">  _##  AGENT++ without prior written consent from the authors. </span>
00063 <span class="comment">  _##</span>
00064 <span class="comment">  _##  The Licensee may distribute  binaries derived from or contained within</span>
00065 <span class="comment">  _##  AGENT++ provided that:</span>
00066 <span class="comment">  _##</span>
00067 <span class="comment">  _##  1) The Binaries are  not integrated,  bundled,  combined, or otherwise</span>
00068 <span class="comment">  _##     associated with a SNMP agent development environment or  SNMP agent</span>
00069 <span class="comment">  _##     development tool; and</span>
00070 <span class="comment">  _##</span>
00071 <span class="comment">  _##  2) The Binaries are not a documented part of any distribution material. </span>
00072 <span class="comment">  _##</span>
00073 <span class="comment">  _##</span>
00074 <span class="comment">  _##  THIS  SOFTWARE  IS  PROVIDED ``AS  IS''  AND  ANY  EXPRESS OR  IMPLIED</span>
00075 <span class="comment">  _##  WARRANTIES, INCLUDING, BUT NOT LIMITED  TO, THE IMPLIED WARRANTIES  OF</span>
00076 <span class="comment">  _##  MERCHANTABILITY AND FITNESS FOR  A PARTICULAR PURPOSE  ARE DISCLAIMED.</span>
00077 <span class="comment">  _##  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,</span>
00078 <span class="comment">  _##  INDIRECT,   INCIDENTAL,  SPECIAL, EXEMPLARY,  OR CONSEQUENTIAL DAMAGES</span>
00079 <span class="comment">  _##  (INCLUDING,  BUT NOT LIMITED  TO,  PROCUREMENT OF SUBSTITUTE  GOODS OR</span>
00080 <span class="comment">  _##  SERVICES; LOSS OF  USE,  DATA, OR PROFITS; OR  BUSINESS  INTERRUPTION)</span>
00081 <span class="comment">  _##  HOWEVER CAUSED  AND ON ANY THEORY  OF  LIABILITY, WHETHER IN CONTRACT,</span>
00082 <span class="comment">  _##  STRICT LIABILITY, OR TORT  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING</span>
00083 <span class="comment">  _##  IN  ANY WAY OUT OF  THE USE OF THIS  SOFTWARE,  EVEN IF ADVISED OF THE</span>
00084 <span class="comment">  _##  POSSIBILITY OF SUCH DAMAGE. </span>
00085 <span class="comment">  _##</span>
00086 <span class="comment">  _##</span>
00087 <span class="comment">  _##  Stuttgart, Germany, Thu Jan 13 00:12:31 CET 2005 </span>
00088 <span class="comment">  _##  </span>
00089 <span class="comment">  _##########################################################################*/</span>
00090 
00091 <span class="preprocessor">#ifndef _List_h_</span>
00092 <span class="preprocessor"></span><span class="preprocessor">#define _List_h_</span>
00093 <span class="preprocessor"></span>
00094 <span class="preprocessor">#ifndef NULL</span>
<a name="l00095"></a><a class="code" href="List_8h.html#a0">00095</a> <span class="preprocessor"></span><span class="preprocessor">#define NULL 0</span>
00096 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00097 <span class="preprocessor"></span>
00098 <span class="preprocessor">#include &lt;<a class="code" href="agent++_8h.html">agent_pp/agent++.h</a>&gt;</span>
00099 <span class="preprocessor">#include &lt;<a class="code" href="avl__map_8h.html">agent_pp/avl_map.h</a>&gt;</span>
00100 
00101 <span class="preprocessor">#ifdef AGENTPP_NAMESPACE</span>
00102 <span class="preprocessor"></span><span class="keyword">namespace </span>Agentpp {
00103 <span class="preprocessor">#endif</span>
00104 <span class="preprocessor"></span>
00105 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classList.html">List</a>;
00106 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classListCursor.html">ListCursor</a>;
00107 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOrderedList.html">OrderedList</a>;
00108 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOidListCursor.html">OidListCursor</a>;
00109 
<a name="l00117"></a><a class="code" href="classListItem.html">00117</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classListItem.html">ListItem</a> {
<a name="l00118"></a><a class="code" href="classListItem.html#n0">00118</a> <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classList.html">List</a>&lt;T&gt;;
<a name="l00119"></a><a class="code" href="classListItem.html#n1">00119</a> <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classListCursor.html">ListCursor</a>&lt;T&gt;;
<a name="l00120"></a><a class="code" href="classListItem.html#n2">00120</a> <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classOrderedList.html">OrderedList</a>&lt;T&gt;;
00121 <span class="keyword">public</span>:
<a name="l00128"></a><a class="code" href="classListItem.html#a0">00128</a>         T* getItem() { <span class="keywordflow">return</span> item; }
00129 
00130 <span class="keyword">private</span>:
00131         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *prev, *next;
00132         T* item;
00133         <a class="code" href="classListItem.html">ListItem</a>(<span class="keyword">const</span> <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *p, <span class="keyword">const</span> <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *n, T* i):
00134                   prev((<a class="code" href="classListItem.html">ListItem</a>&lt;T&gt;*)p), next((<a class="code" href="classListItem.html">ListItem</a>&lt;T&gt;*)n), item(i) { }
00135 };
00136 
<a name="l00137"></a><a class="code" href="classList.html">00137</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classList.html">List</a> {
<a name="l00138"></a><a class="code" href="classList.html#n0">00138</a> <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classListCursor.html">ListCursor</a>&lt;T&gt;;
00139 <span class="keyword">public</span>:
<a name="l00148"></a><a class="code" href="classList.html#a0">00148</a>         T* addFirst(T* t) { 
00149                 head = <span class="keyword">new</span> <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>(<a class="code" href="List_8h.html#a0">NULL</a>, head, t);
00150                 <span class="keywordflow">if</span> (head-&gt;next) head-&gt;<a class="code" href="classListCursor.html#a6">next</a>-&gt;prev = head;
00151                 <span class="keywordflow">if</span> (!tail)
00152                         tail = head;
00153                 <span class="keywordflow">return</span> head-&gt;item;
00154         }
00155 
<a name="l00164"></a><a class="code" href="classList.html#a1">00164</a>         T* addLast(T* t) {
00165                 <span class="keywordflow">if</span> (!head)
00166                         <span class="keywordflow">return</span> addFirst(t);
00167                 <span class="keywordflow">else</span> {
00168                         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *p = tail;
00169                         p-&gt;<a class="code" href="classListItem.html#r1">next</a> = <span class="keyword">new</span> <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>(p, <a class="code" href="List_8h.html#a0">NULL</a>, t);
00170                         tail = p-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00171                         <span class="keywordflow">return</span> tail-&gt;<a class="code" href="classListItem.html#r2">item</a>;
00172                 }
00173         }
00174 
<a name="l00183"></a><a class="code" href="classList.html#a2">00183</a>         T* add(T* t)    { <span class="keywordflow">return</span> addLast(t); }
00184 
<a name="l00195"></a><a class="code" href="classList.html#a3">00195</a>         T* insertBefore(T* item, T* elem) {
00196                 <span class="keywordflow">if</span> ((!head) || (head-&gt;item == elem)) {
00197                         <span class="keywordflow">return</span> addFirst(item);
00198                 }
00199                 <span class="keywordflow">else</span> {
00200                         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* tmp;
00201                         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* h;
00202                         tmp = head;
00203                         <span class="keywordflow">while</span> ((tmp-&gt;<a class="code" href="classListItem.html#r1">next</a>) &amp;&amp; (elem != tmp-&gt;<a class="code" href="classListItem.html#r1">next</a>-&gt;item))
00204                               tmp = tmp-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00205                         h = tmp-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00206                         <span class="keywordflow">if</span> (h) {
00207                                 tmp-&gt;<a class="code" href="classListItem.html#r1">next</a> = <span class="keyword">new</span> <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>(tmp, h, item);
00208                                 h-&gt;<a class="code" href="classListItem.html#r0">prev</a> = tmp-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00209                         }
00210                         <span class="keywordflow">else</span> {
00211                                 tmp-&gt;<a class="code" href="classListItem.html#r1">next</a> = <span class="keyword">new</span> <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>(tmp, <a class="code" href="List_8h.html#a0">NULL</a>, item);
00212                                 tail = tmp-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00213                         }
00214                         <span class="keywordflow">return</span> tmp-&gt;<a class="code" href="classListItem.html#r1">next</a>-&gt;item;
00215                 }
00216         }
00217 
<a name="l00228"></a><a class="code" href="classList.html#a4">00228</a>         T* insertAfter(T* item, T* elem) {
00229                 <span class="keywordflow">if</span> ((!tail) || (tail-&gt;item == elem)) {
00230                         <span class="keywordflow">return</span> addLast(item);
00231                 }
00232                 <span class="keywordflow">else</span> {
00233                         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* tmp;
00234                         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* h;
00235                         tmp = tail;
00236                         <span class="keywordflow">while</span> ((tmp-&gt;<a class="code" href="classListItem.html#r0">prev</a>) &amp;&amp; (elem != tmp-&gt;<a class="code" href="classListItem.html#r0">prev</a>-&gt;item))
00237                               tmp = tmp-&gt;<a class="code" href="classListItem.html#r0">prev</a>;
00238                         h = tmp-&gt;<a class="code" href="classListItem.html#r0">prev</a>;
00239                         <span class="keywordflow">if</span> (h) {
00240                                 tmp-&gt;<a class="code" href="classListItem.html#r0">prev</a> = <span class="keyword">new</span> <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>(h, tmp, item);
00241                                 h-&gt;<a class="code" href="classListItem.html#r1">next</a> = tmp-&gt;<a class="code" href="classListItem.html#r0">prev</a>;
00242                         }
00243                         <span class="keywordflow">else</span> {
00244                                 tmp-&gt;<a class="code" href="classListItem.html#r0">prev</a> = <span class="keyword">new</span> <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>(<a class="code" href="List_8h.html#a0">NULL</a>, tmp, item);
00245                                 head = tmp-&gt;<a class="code" href="classListItem.html#r0">prev</a>;
00246                         }
00247                         <span class="keywordflow">return</span> tmp-&gt;<a class="code" href="classListItem.html#r0">prev</a>-&gt;item;
00248                 }
00249         }
00250 
<a name="l00257"></a><a class="code" href="classList.html#a5">00257</a>         T* removeFirst() {
00258                 <span class="keywordflow">if</span> (head) {
00259                         T* retval = head-&gt;item;
00260                         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *temp = head;
00261                         head            = head-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00262                         <span class="keywordflow">if</span> (!head) 
00263                                 tail = 0;
00264                         <span class="keywordflow">else</span> 
00265                                 head-&gt;<a class="code" href="classListItem.html#r0">prev</a>      = <a class="code" href="List_8h.html#a0">NULL</a>;
00266                         <span class="keyword">delete</span> temp;
00267                         <span class="keywordflow">return</span> retval;
00268                 }
00269                 <span class="keywordflow">return</span> 0;
00270         }
00271 
<a name="l00278"></a><a class="code" href="classList.html#a6">00278</a>         T* removeLast() {
00279                 <span class="keywordflow">if</span> (tail) {
00280                         T* retval = tail-&gt;item;
00281                         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *temp = tail;
00282                         tail            = tail-&gt;<a class="code" href="classListItem.html#r0">prev</a>;
00283                         <span class="keywordflow">if</span> (!tail) 
00284                                 head = 0;
00285                         <span class="keywordflow">else</span> 
00286                                 tail-&gt;<a class="code" href="classListItem.html#r1">next</a>      = <a class="code" href="List_8h.html#a0">NULL</a>;
00287                         <span class="keyword">delete</span> temp;
00288                         <span class="keywordflow">return</span> retval;
00289                 }
00290                 <span class="keywordflow">return</span> 0;
00291         }
00292 
<a name="l00296"></a><a class="code" href="classList.html#a7">00296</a>         <span class="keywordtype">void</span> clearAll() {
00297                 <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* tmp = head;
00298                 <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* del;
00299                 <span class="keywordflow">while</span> (tmp) {
00300                         <span class="keyword">delete</span> tmp-&gt;<a class="code" href="classListItem.html#r2">item</a>;
00301                         del = tmp;
00302                         tmp = tmp-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00303                         <span class="keyword">delete</span> del;
00304                 }
00305                 head = 0;
00306                 tail = 0;
00307         }
00308 
<a name="l00313"></a><a class="code" href="classList.html#a8">00313</a>         <span class="keywordtype">void</span> clear() {
00314                 <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* tmp = head;
00315                 <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* del;
00316                 <span class="keywordflow">while</span> (tmp) {
00317                         del = tmp;
00318                         tmp = tmp-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00319                         <span class="keyword">delete</span> del;
00320                 }
00321                 head = 0;
00322                 tail = 0;
00323         }
00324 
<a name="l00334"></a><a class="code" href="classList.html#a9">00334</a>         T* remove(T* i) {
00335 
00336                 <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *tmp;
00337 
00338                 <span class="keywordflow">if</span> (!head) 
00339                         <span class="keywordflow">return</span> 0;
00340                 tmp = head;
00341                 <span class="keywordflow">do</span> {
00342                         <span class="keywordflow">if</span> (tmp-&gt;<a class="code" href="classListItem.html#r2">item</a> == i) {
00343                                 <span class="keywordflow">return</span> remove(tmp);
00344                         }
00345                 }
00346                 <span class="keywordflow">while</span> ((tmp = tmp-&gt;<a class="code" href="classListItem.html#r1">next</a>) != 0);
00347                 <span class="keywordflow">return</span> 0;
00348         }
00349 
<a name="l00359"></a><a class="code" href="classList.html#a10">00359</a>         T* remove(<a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* victim) {
00360                 T* i = victim-&gt;<a class="code" href="classListItem.html#r2">item</a>;
00361                 <span class="keywordflow">if</span> ((victim-&gt;<a class="code" href="classListItem.html#r0">prev</a>) &amp;&amp; (victim-&gt;<a class="code" href="classListItem.html#r1">next</a>)) {
00362                         victim-&gt;<a class="code" href="classListItem.html#r0">prev</a>-&gt;next = victim-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00363                         victim-&gt;<a class="code" href="classListItem.html#r1">next</a>-&gt;prev = victim-&gt;<a class="code" href="classListItem.html#r0">prev</a>;
00364                 }
00365                 <span class="keywordflow">else</span> 
00366                         <span class="keywordflow">if</span> (victim-&gt;<a class="code" href="classListItem.html#r1">next</a>) {
00367                                 victim-&gt;<a class="code" href="classListItem.html#r1">next</a>-&gt;prev = 0;
00368                                 head = victim-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00369                         }
00370                         <span class="keywordflow">else</span> 
00371                                 <span class="keywordflow">if</span> (victim-&gt;<a class="code" href="classListItem.html#r0">prev</a>) {
00372                                         victim-&gt;<a class="code" href="classListItem.html#r0">prev</a>-&gt;next = 0;
00373                                         tail = victim-&gt;<a class="code" href="classListItem.html#r0">prev</a>;
00374                                 }
00375                                 <span class="keywordflow">else</span> {
00376                                         head = 0;
00377                                         tail = 0;
00378                                 }
00379                 <span class="keyword">delete</span> victim;
00380                 <span class="keywordflow">return</span> i;
00381         }
00382 
<a name="l00392"></a><a class="code" href="classList.html#a11">00392</a>         T* getNth(<span class="keywordtype">int</span> n)<span class="keyword"> const </span>{
00393                 <span class="keywordflow">if</span> (!head)
00394                         <span class="keywordflow">return</span> <a class="code" href="List_8h.html#a0">NULL</a>; 
00395                 <span class="keywordflow">else</span> {
00396                         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *p = head; 
00397 
00398                         <span class="keywordflow">while</span> ((n&gt;0) &amp;&amp; (p-&gt;<a class="code" href="classListItem.html#r1">next</a>)) {
00399                                 n--;
00400                                 p = p-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00401                         }
00402                         <span class="keywordflow">if</span> (n != 0)
00403                                 <span class="keywordflow">return</span> <a class="code" href="List_8h.html#a0">NULL</a>;
00404                         <span class="keywordflow">return</span> p-&gt;<a class="code" href="classListItem.html#r2">item</a>;
00405                 }
00406         }
00407 
<a name="l00417"></a><a class="code" href="classList.html#a12">00417</a>         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* position(T* t)<span class="keyword"> const </span>{
00418 
00419                 <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *p = head; 
00420                 
00421                 <span class="keywordflow">while</span> ((p) &amp;&amp; (p-&gt;<a class="code" href="classListItem.html#r2">item</a> != t))
00422                         p = p-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00423                 <span class="keywordflow">return</span> p;
00424         }
00425                 
<a name="l00435"></a><a class="code" href="classList.html#a13">00435</a>         <span class="keywordtype">int</span> index(T* t)<span class="keyword"> const </span>{
00436 
00437                 <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *p = head; 
00438                 <span class="keywordtype">int</span> i=0;
00439                 <span class="keywordflow">for</span> (; (p) &amp;&amp; (p-&gt;<a class="code" href="classListItem.html#r2">item</a> != t); i++)
00440                         p = p-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00441                 <span class="keywordflow">return</span> (p) ? i : -1;
00442         }
00443                 
<a name="l00450"></a><a class="code" href="classList.html#a14">00450</a>         T* first()<span class="keyword"> const        </span>{ <span class="keywordflow">return</span> (head) ? head-&gt;item : 0; }
<a name="l00457"></a><a class="code" href="classList.html#a15">00457</a>         T* last()<span class="keyword"> const         </span>{ <span class="keywordflow">return</span> (tail) ? tail-&gt;item : 0; }
00458 
<a name="l00470"></a><a class="code" href="classList.html#a16">00470</a>         T* overwriteNth(<span class="keywordtype">int</span> n, T* t) {
00471                 <span class="keywordflow">if</span> (!head)
00472                         <span class="keywordflow">return</span> <a class="code" href="List_8h.html#a0">NULL</a>; 
00473                 <span class="keywordflow">else</span> {
00474                         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *p = head; 
00475 
00476                         <span class="keywordflow">while</span> ((n&gt;0) &amp;&amp; (p-&gt;<a class="code" href="classListItem.html#r1">next</a>)) {
00477                                 n--;
00478                                 p = p-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00479                         }
00480                         <span class="keywordflow">if</span> (n == 0) {
00481                                 <span class="keywordflow">if</span> (p-&gt;<a class="code" href="classListItem.html#r2">item</a>)
00482                                         <span class="keyword">delete</span> p-&gt;<a class="code" href="classListItem.html#r2">item</a>;
00483                                 p-&gt;<a class="code" href="classListItem.html#r2">item</a> = t;
00484                         }
00485                         <span class="keywordflow">return</span> p-&gt;<a class="code" href="classListItem.html#r2">item</a>;
00486                 }
00487         }
00488 
<a name="l00497"></a><a class="code" href="classList.html#a17">00497</a>         <span class="keywordtype">int</span> trim(<span class="keywordtype">int</span> n) {
00498                 T* t = 0;
00499                 <span class="keywordtype">int</span> i=0;
00500                 <span class="keywordflow">for</span> (; (i&lt;n) &amp;&amp; ((t = removeLast()) != 0); i++) {
00501                         <span class="keyword">delete</span> t;
00502                 }
00503                 <span class="keywordflow">return</span> i;
00504         }
00505 
<a name="l00512"></a><a class="code" href="classList.html#a18">00512</a>         <span class="keywordtype">int</span> size()<span class="keyword"> const </span>{
00513                 <span class="keywordtype">int</span> r = 0;
00514                 <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *p = head;
00515                 <span class="keywordflow">while</span> (p) {
00516                         r++;
00517                         p = p-&gt;<a class="code" href="classListItem.html#r1">next</a>;
00518                 }
00519                 <span class="keywordflow">return</span> r;
00520         }
00521 
<a name="l00529"></a><a class="code" href="classList.html#a19">00529</a>         <span class="keywordtype">int</span> empty()<span class="keyword"> const </span>{
00530                 <span class="keywordflow">return</span> (head == 0);
00531         }
00532 
<a name="l00536"></a><a class="code" href="classList.html#a20">00536</a>         <a class="code" href="classList.html">List</a>(): head(0), tail(0) { }
00537         
<a name="l00541"></a><a class="code" href="classList.html#a21">00541</a>         ~<a class="code" href="classList.html">List</a>()                                         { clearAll(); }
00542 
00543 <span class="keyword">protected</span>:
00544 
<a name="l00545"></a><a class="code" href="classList.html#p0">00545</a>         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *head;
<a name="l00546"></a><a class="code" href="classList.html#p1">00546</a>         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a> *tail;
00547 };
00548 
<a name="l00549"></a><a class="code" href="classListCursor.html">00549</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classListCursor.html">ListCursor</a> {
00550 <span class="keyword">public</span>:
<a name="l00551"></a><a class="code" href="classListCursor.html#a0">00551</a>         <span class="keywordtype">void</span> init(<span class="keyword">const</span> <a class="code" href="classList.html">List&lt;T&gt;</a>* l)             { cursor = l-&gt;<a class="code" href="classList.html#p0">head</a>; }
<a name="l00552"></a><a class="code" href="classListCursor.html#a1">00552</a>         <span class="keywordtype">void</span> initLast(<span class="keyword">const</span> <a class="code" href="classList.html">List&lt;T&gt;</a>* l)         { cursor = l-&gt;<a class="code" href="classList.html#p1">tail</a>; }
<a name="l00553"></a><a class="code" href="classListCursor.html#a2">00553</a>         <span class="keywordtype">void</span> init(<a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* t)               { cursor = t; }
00554 
<a name="l00555"></a><a class="code" href="classListCursor.html#a3">00555</a>         <span class="keywordtype">void</span> init(<span class="keyword">const</span> <a class="code" href="classOrderedList.html">OrderedList&lt;T&gt;</a>* l) { cursor = l-&gt;<a class="code" href="classOrderedList.html#p0">content</a>.head; }
<a name="l00556"></a><a class="code" href="classListCursor.html#a4">00556</a>         <span class="keywordtype">void</span> initLast(<span class="keyword">const</span> <a class="code" href="classOrderedList.html">OrderedList&lt;T&gt;</a>* l) { cursor = l-&gt;<a class="code" href="classOrderedList.html#p0">content</a>.tail; }
00557         
<a name="l00558"></a><a class="code" href="classListCursor.html#a5">00558</a>         T* get() {
00559                 <span class="keywordflow">if</span> (cursor)     
00560                         <span class="keywordflow">return</span> cursor-&gt;item;
00561                 <span class="keywordflow">else</span>
00562                         <span class="keywordflow">return</span> 0;
00563         }
00564 
<a name="l00565"></a><a class="code" href="classListCursor.html#a6">00565</a>         <span class="keywordtype">int</span> next() {
00566                 <span class="keywordflow">if</span> ((cursor) &amp;&amp; (cursor-&gt;next)) {
00567                         cursor = cursor-&gt;next;
00568                         <span class="keywordflow">return</span> 1;
00569                 } <span class="keywordflow">else</span> 
00570                         <span class="keywordflow">if</span> (cursor)
00571                                 cursor = 0;
00572                 <span class="keywordflow">return</span> 0;       
00573         }
00574 
<a name="l00575"></a><a class="code" href="classListCursor.html#a7">00575</a>         <span class="keywordtype">int</span> prev() {
00576                 <span class="keywordflow">if</span> ((cursor) &amp;&amp; (cursor-&gt;prev)) {
00577                         cursor = cursor-&gt;prev;
00578                         <span class="keywordflow">return</span> 1;
00579                 } <span class="keywordflow">else</span> 
00580                         <span class="keywordflow">if</span> (cursor)
00581                                 cursor = 0;
00582                 <span class="keywordflow">return</span> 0;       
00583         }
00584 
<a name="l00585"></a><a class="code" href="classListCursor.html#a8">00585</a>         <span class="keywordtype">int</span> isNext() {
00586                 <span class="keywordflow">if</span> ((cursor) &amp;&amp; (cursor-&gt;next)) 
00587                         <span class="keywordflow">return</span> 1;
00588                 <span class="keywordflow">return</span> 0;       
00589         }
00590 
<a name="l00591"></a><a class="code" href="classListCursor.html#a9">00591</a>         <span class="keywordtype">int</span> isPrev() {
00592                 <span class="keywordflow">if</span> ((cursor) &amp;&amp; (cursor-&gt;prev)) 
00593                         <span class="keywordflow">return</span> 1;
00594                 <span class="keywordflow">return</span> 0;       
00595         }
00596 
<a name="l00597"></a><a class="code" href="classListCursor.html#a10">00597</a>         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* get_cursor() {
00598                 <span class="keywordflow">return</span> cursor;
00599         }
00600 
<a name="l00601"></a><a class="code" href="classListCursor.html#a11">00601</a>         <a class="code" href="classListCursor.html">ListCursor</a>(): cursor(0) { };
<a name="l00602"></a><a class="code" href="classListCursor.html#a12">00602</a>         <a class="code" href="classListCursor.html">ListCursor</a>(<span class="keyword">const</span> <a class="code" href="classList.html">List&lt;T&gt;</a>* l): cursor(l-&gt;head) { };
<a name="l00603"></a><a class="code" href="classListCursor.html#a13">00603</a>         <a class="code" href="classListCursor.html">ListCursor</a>(<span class="keyword">const</span> <a class="code" href="classListCursor.html">ListCursor&lt;T&gt;</a>&amp; c): cursor(c.cursor) { };
00604         
00605 <span class="keyword">protected</span>:
<a name="l00606"></a><a class="code" href="classListCursor.html#p0">00606</a>         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>     *cursor;
00607 };
00608 
00609 
00610 <span class="comment">//</span>
00611 <span class="comment">// OrderedList is implemented as a wrapper of List to avoid corrupting</span>
00612 <span class="comment">// the order by using directly methods of List</span>
00613 <span class="comment">//</span>
00614 
00615 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOrderedList.html">OrderedList</a>;
00616 
<a name="l00617"></a><a class="code" href="classOrderedList.html">00617</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOrderedList.html">OrderedList</a> {
<a name="l00618"></a><a class="code" href="classOrderedList.html#n0">00618</a> <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classListCursor.html">ListCursor</a>&lt;T&gt;;
00619 <span class="keyword">public</span>:
<a name="l00620"></a><a class="code" href="classOrderedList.html#a0">00620</a>         T* add(T* item) {
00621                 <span class="keywordflow">if</span> (!content.empty()) {
00622                         <a class="code" href="classListCursor.html">ListCursor&lt;T&gt;</a> cur;
00623                         <span class="keywordflow">for</span> (cur.<a class="code" href="classListCursor.html#a0">init</a>(&amp;content); cur.<a class="code" href="classListCursor.html#a5">get</a>(); cur.<a class="code" href="classListCursor.html#a6">next</a>()) {
00624                                 <span class="keywordflow">if</span> (*item &lt; *cur.<a class="code" href="classListCursor.html#a5">get</a>())
00625                                         <span class="keywordflow">return</span> content.insertBefore(item, cur.<a class="code" href="classListCursor.html#a5">get</a>());
00626                         }
00627                         <span class="keywordflow">return</span> content.add(item);
00628                 }
00629                 <span class="keywordflow">else</span> <span class="keywordflow">return</span> content.add(item);
00630         }
00631 
<a name="l00632"></a><a class="code" href="classOrderedList.html#a1">00632</a>         T* addLast(T* item) {
00633                 <span class="keywordflow">if</span> (!content.empty()) {
00634                         <a class="code" href="classListCursor.html">ListCursor&lt;T&gt;</a> cur;
00635                         <span class="keywordflow">for</span> (cur.<a class="code" href="classListCursor.html#a1">initLast</a>(&amp;content); cur.<a class="code" href="classListCursor.html#a5">get</a>(); cur.<a class="code" href="classListCursor.html#a7">prev</a>()) {
00636                                 <span class="keywordflow">if</span> (*item &gt; *cur.<a class="code" href="classListCursor.html#a5">get</a>())
00637                                         <span class="keywordflow">return</span> content.insertAfter(item, 
00638                                                                    cur.<a class="code" href="classListCursor.html#a5">get</a>());
00639                         }
00640                         <span class="keywordflow">return</span> content.addFirst(item);
00641                 }
00642                 <span class="keywordflow">else</span> <span class="keywordflow">return</span> content.addFirst(item);
00643         }
00644 
00645         <span class="comment">// add a new item, but if an equal item already exists:</span>
00646         <span class="comment">// do not change the list, delete the new item and return 0 </span>
<a name="l00647"></a><a class="code" href="classOrderedList.html#a2">00647</a>         T* addUnique(T* item) {
00648                 <span class="keywordflow">if</span> (!content.empty()) {
00649                         <a class="code" href="classListCursor.html">ListCursor&lt;T&gt;</a> cur;
00650                         <span class="keywordflow">for</span> (cur.<a class="code" href="classListCursor.html#a0">init</a>(&amp;content); cur.<a class="code" href="classListCursor.html#a5">get</a>(); cur.<a class="code" href="classListCursor.html#a6">next</a>()) {
00651                                 <span class="keywordflow">if</span> (*item == *cur.<a class="code" href="classListCursor.html#a5">get</a>()) {
00652                                         <span class="keyword">delete</span> item;
00653                                         <span class="keywordflow">return</span> 0;
00654                                 }
00655                                 <span class="keywordflow">if</span> (*item &lt; *cur.<a class="code" href="classListCursor.html#a5">get</a>()) 
00656                                         <span class="keywordflow">return</span> content.insertBefore(item, cur.<a class="code" href="classListCursor.html#a5">get</a>());
00657                         }
00658                         <span class="keywordflow">return</span> content.add(item);
00659                 }
00660                 <span class="keywordflow">else</span> <span class="keywordflow">return</span> content.add(item);
00661         }
00662 
<a name="l00663"></a><a class="code" href="classOrderedList.html#a3">00663</a>         T* remove(T* item) { <span class="keywordflow">return</span> content.remove(item); }
<a name="l00664"></a><a class="code" href="classOrderedList.html#a4">00664</a>         T* remove(<a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* item) { <span class="keywordflow">return</span> content.remove(item); }
00665 
<a name="l00666"></a><a class="code" href="classOrderedList.html#a5">00666</a>         T* overwriteNth(<span class="keywordtype">int</span> n, T* t) {
00667                 <span class="keywordflow">return</span> content.overwriteNth(n, t);
00668         }
00669 
<a name="l00670"></a><a class="code" href="classOrderedList.html#a6">00670</a>         <span class="keywordtype">int</span>     size()<span class="keyword"> const  </span>{ <span class="keywordflow">return</span> content.size(); }
<a name="l00671"></a><a class="code" href="classOrderedList.html#a7">00671</a>         T*      first()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> content.first(); }
<a name="l00672"></a><a class="code" href="classOrderedList.html#a8">00672</a>         T*      last()<span class="keyword"> const  </span>{ <span class="keywordflow">return</span> content.last(); }
<a name="l00673"></a><a class="code" href="classOrderedList.html#a9">00673</a>         T*      getNth(<span class="keywordtype">int</span> i)<span class="keyword"> const  </span>{ <span class="keywordflow">return</span> content.getNth(i); }
00674 
<a name="l00675"></a><a class="code" href="classOrderedList.html#a10">00675</a>         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* position(T* t)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> content.position(t); }
<a name="l00676"></a><a class="code" href="classOrderedList.html#a11">00676</a>         <span class="keywordtype">int</span>             index(T* t)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> content.index(t); }
00677 
<a name="l00678"></a><a class="code" href="classOrderedList.html#a12">00678</a>         <span class="keywordtype">int</span>     empty()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> content.empty(); }
00679 
<a name="l00680"></a><a class="code" href="classOrderedList.html#a13">00680</a>         <span class="keywordtype">void</span>    clearAll()      { content.clearAll(); }
<a name="l00681"></a><a class="code" href="classOrderedList.html#a14">00681</a>         <span class="keywordtype">void</span>    clear()         { content.clear(); }
00682 
00683 <span class="keyword">protected</span>:
00684 
<a name="l00685"></a><a class="code" href="classOrderedList.html#p0">00685</a>         <a class="code" href="classList.html">List&lt;T&gt;</a> content;        
00686 };
00687 
00688 
<a name="l00689"></a><a class="code" href="classOrderedListCursor.html">00689</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOrderedListCursor.html">OrderedListCursor</a> {
00690 <span class="keyword">public</span>:
<a name="l00691"></a><a class="code" href="classOrderedListCursor.html#a0">00691</a>         <span class="keywordtype">void</span> init(<span class="keyword">const</span> <a class="code" href="classOrderedList.html">OrderedList&lt;T&gt;</a>* l)     { cursor.init(l); }
<a name="l00692"></a><a class="code" href="classOrderedListCursor.html#a1">00692</a>         <span class="keywordtype">void</span> initLast(<span class="keyword">const</span> <a class="code" href="classOrderedList.html">OrderedList&lt;T&gt;</a>* l) { cursor.initLast(l); }
<a name="l00693"></a><a class="code" href="classOrderedListCursor.html#a2">00693</a>         <span class="keywordtype">void</span> init(<a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* t)              { cursor.init(t); }
00694         
<a name="l00695"></a><a class="code" href="classOrderedListCursor.html#a3">00695</a>         T*      get()           { <span class="keywordflow">return</span> cursor.get(); }
<a name="l00696"></a><a class="code" href="classOrderedListCursor.html#a4">00696</a>         <span class="keywordtype">int</span>     next()          { <span class="keywordflow">return</span> cursor.next(); }
<a name="l00697"></a><a class="code" href="classOrderedListCursor.html#a5">00697</a>         <span class="keywordtype">int</span>     isNext()        { <span class="keywordflow">return</span> cursor.isNext(); }
<a name="l00698"></a><a class="code" href="classOrderedListCursor.html#a6">00698</a>         <span class="keywordtype">int</span>     prev()          { <span class="keywordflow">return</span> cursor.prev(); }
<a name="l00699"></a><a class="code" href="classOrderedListCursor.html#a7">00699</a>         <span class="keywordtype">int</span>     isPrev()        { <span class="keywordflow">return</span> cursor.isPrev(); }
<a name="l00700"></a><a class="code" href="classOrderedListCursor.html#a8">00700</a>         <a class="code" href="classListItem.html">ListItem&lt;T&gt;</a>* get_cursor() { <span class="keywordflow">return</span> cursor.get_cursor(); }
00701         
<a name="l00702"></a><a class="code" href="classOrderedListCursor.html#a9">00702</a>         <a class="code" href="classOrderedListCursor.html">OrderedListCursor</a>() { }
<a name="l00703"></a><a class="code" href="classOrderedListCursor.html#a10">00703</a>         <a class="code" href="classOrderedListCursor.html">OrderedListCursor</a>(<span class="keyword">const</span> <a class="code" href="classOrderedList.html">OrderedList&lt;T&gt;</a>* l): 
00704           cursor((const <a class="code" href="classList.html">List</a>&lt;T&gt;*)l) { }
<a name="l00705"></a><a class="code" href="classOrderedListCursor.html#a11">00705</a>         <a class="code" href="classOrderedListCursor.html">OrderedListCursor</a>(<span class="keyword">const</span> <a class="code" href="classOrderedListCursor.html">OrderedListCursor&lt;T&gt;</a>&amp; c): cursor(c.cursor) { }
00706 <span class="keyword">protected</span>:
<a name="l00707"></a><a class="code" href="classOrderedListCursor.html#p0">00707</a>         <a class="code" href="classListCursor.html">ListCursor&lt;T&gt;</a> cursor;
00708 };
00709 
00710 
00711 
00712 
<a name="l00713"></a><a class="code" href="classOidList.html">00713</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOidList.html">OidList</a> {
<a name="l00714"></a><a class="code" href="classOidList.html#n0">00714</a> <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classOidListCursor.html">OidListCursor</a>&lt;T&gt;;
00715 <span class="keyword">public</span>:
<a name="l00716"></a><a class="code" href="classOidList.html#a0">00716</a>         T* add(T* item) {
00717                 (*content)[item-&gt;key()] = (<span class="keywordtype">void</span>*)item;
00718                 <span class="keywordflow">return</span> item;
00719         }
00720 
<a name="l00721"></a><a class="code" href="classOidList.html#a1">00721</a>         T* remove(T* item) {
00722                 content-&gt;del(item-&gt;key());
00723                 <span class="keywordflow">return</span> item;
00724         }
00725 
<a name="l00726"></a><a class="code" href="classOidList.html#a2">00726</a>         <span class="keywordtype">void</span> remove(<a class="code" href="classOidx.html">Oidx</a>* oidptr) {
00727                 T* t = find(oidptr);
00728                 content-&gt;del(oidptr);
00729                 <span class="keywordflow">if</span> (t) <span class="keyword">delete</span> t;
00730         }         
00731 
<a name="l00732"></a><a class="code" href="classOidList.html#a3">00732</a>         T* find(<a class="code" href="classOidx.html">Oidx</a>* oidptr)<span class="keyword"> const </span>{
00733                 <a class="code" href="map_8h.html#a1">Pix</a> i = content-&gt;seek(oidptr);
00734                 <span class="keywordflow">if</span> (i) <span class="keywordflow">return</span> (T*)content-&gt;contents(i);
00735                 <span class="keywordflow">return</span> 0;
00736         }
00737 
<a name="l00738"></a><a class="code" href="classOidList.html#a4">00738</a>         T* find_lower(<a class="code" href="classOidx.html">Oidx</a>* oidptr)<span class="keyword"> const </span>{
00739                 <a class="code" href="map_8h.html#a1">Pix</a> i = content-&gt;seek_inexact(oidptr);
00740                 <span class="keywordflow">if</span> (!i) <span class="keywordflow">return</span> 0;
00741                 <span class="keywordflow">while</span> ((i) &amp;&amp; (i != content-&gt;last()) &amp;&amp;
00742                        (*content-&gt;key(i) &lt; *oidptr))
00743                         content-&gt;next(i);
00744                 <span class="keywordflow">while</span> ((i) &amp;&amp; (*content-&gt;key(i) &gt; *oidptr))
00745                         content-&gt;prev(i);
00746                 
00747                 <span class="keywordflow">if</span> (i) <span class="keywordflow">return</span> (T*)content-&gt;contents(i);
00748                 <span class="keywordflow">return</span> 0;
00749         }
00750 
<a name="l00751"></a><a class="code" href="classOidList.html#a5">00751</a>         T* find_upper(<a class="code" href="classOidx.html">Oidx</a>* oidptr)<span class="keyword"> const </span>{
00752                 <a class="code" href="map_8h.html#a1">Pix</a> i = content-&gt;seek_inexact(oidptr);
00753                 <span class="keywordflow">if</span> (!i) <span class="keywordflow">return</span> 0;
00754                 <span class="keywordflow">while</span> ((i) &amp;&amp; (i != content-&gt;first()) &amp;&amp;
00755                        (*content-&gt;key(i) &gt; *oidptr))
00756                         content-&gt;prev(i);
00757                 <span class="keywordflow">while</span> ((i) &amp;&amp; (*content-&gt;key(i) &lt; *oidptr))
00758                         content-&gt;next(i);
00759                 <span class="keywordflow">if</span> (i) <span class="keywordflow">return</span> (T*)content-&gt;contents(i);
00760                 <span class="keywordflow">return</span> 0;
00761         }
00762 
<a name="l00763"></a><a class="code" href="classOidList.html#a6">00763</a>         T* find_next(<a class="code" href="classOidx.html">Oidx</a>* oidptr)<span class="keyword"> const </span>{
00764                 <a class="code" href="map_8h.html#a1">Pix</a> i = content-&gt;seek(oidptr);
00765                 <span class="keywordflow">if</span> (!i) <span class="keywordflow">return</span> 0;
00766                 content-&gt;next(i);
00767                 <span class="keywordflow">if</span> (i) <span class="keywordflow">return</span> (T*)content-&gt;contents(i);
00768                 <span class="keywordflow">return</span> 0;
00769         }
00770 
<a name="l00771"></a><a class="code" href="classOidList.html#a7">00771</a>         T* find_prev(<a class="code" href="classOidx.html">Oidx</a>* oidptr)<span class="keyword"> const </span>{
00772                 <a class="code" href="map_8h.html#a1">Pix</a> i = content-&gt;seek(oidptr);
00773                 <span class="keywordflow">if</span> (!i) <span class="keywordflow">return</span> 0;
00774                 content-&gt;prev(i);
00775                 <span class="keywordflow">if</span> (i) <span class="keywordflow">return</span> (T*)content-&gt;contents(i);
00776                 <span class="keywordflow">return</span> 0;
00777         }
00778 
<a name="l00779"></a><a class="code" href="classOidList.html#a8">00779</a>         T* seek(<a class="code" href="classOidx.html">Oidx</a>* oidptr)<span class="keyword"> const </span>{
00780                 <a class="code" href="map_8h.html#a1">Pix</a> i = content-&gt;seek_inexact(oidptr);
00781                 <span class="keywordflow">if</span> (i) <span class="keywordflow">return</span> (T*)content-&gt;contents(i);
00782                 <span class="keywordflow">return</span> 0;
00783         }
00784 
<a name="l00785"></a><a class="code" href="classOidList.html#a9">00785</a>         <span class="keywordtype">int</span>     size()<span class="keyword"> const  </span>{ <span class="keywordflow">return</span> content-&gt;length(); }
00786 
<a name="l00787"></a><a class="code" href="classOidList.html#a10">00787</a>         T*      first()<span class="keyword"> const </span>{
00788                 <a class="code" href="map_8h.html#a1">Pix</a> i = content-&gt;first();
00789                 <span class="keywordflow">if</span> (i) <span class="keywordflow">return</span> (T*)content-&gt;contents(i);
00790                 <span class="keywordflow">return</span> 0;
00791         }
00792 
<a name="l00793"></a><a class="code" href="classOidList.html#a11">00793</a>         T*      last()<span class="keyword"> const </span>{
00794                 <a class="code" href="map_8h.html#a1">Pix</a> i = content-&gt;last();
00795                 <span class="keywordflow">if</span> (i) <span class="keywordflow">return</span> (T*)content-&gt;contents(i);
00796                 <span class="keywordflow">return</span> 0;
00797         }
00798 
<a name="l00799"></a><a class="code" href="classOidList.html#a12">00799</a>         T*      getNth(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{
00800                 <a class="code" href="map_8h.html#a1">Pix</a> x = content-&gt;first();
00801                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; ((n&lt;i) &amp;&amp; (x)); n++) {
00802                         content-&gt;next(x);
00803                 }
00804                 <span class="keywordflow">if</span> (x) <span class="keywordflow">return</span> (T*)content-&gt;contents(x);
00805                 <span class="keywordflow">return</span> 0;
00806         }
00807 
<a name="l00808"></a><a class="code" href="classOidList.html#a13">00808</a>         <span class="keywordtype">int</span>     index(T* t)<span class="keyword"> const </span>{ 
00809                 <a class="code" href="map_8h.html#a1">Pix</a> i = content-&gt;seek(t-&gt;key());
00810                 <span class="keywordtype">int</span> n = -1;
00811                 <span class="keywordflow">while</span> (i) {
00812                         content-&gt;prev(i);
00813                         n++;
00814                 }
00815                 <span class="keywordflow">return</span> n;
00816         }
00817 
<a name="l00818"></a><a class="code" href="classOidList.html#a14">00818</a>         <span class="keywordtype">int</span>     empty()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> content-&gt;empty(); }
00819 
<a name="l00820"></a><a class="code" href="classOidList.html#a15">00820</a>         <span class="keywordtype">void</span>    clear() { 
00821                 content-&gt;clear();
00822         }
<a name="l00823"></a><a class="code" href="classOidList.html#a16">00823</a>         <span class="keywordtype">void</span>    clearAll()      {
00824                 <a class="code" href="map_8h.html#a1">Pix</a> i = content-&gt;first();
00825                 <span class="keywordflow">while</span> (i) {
00826                         T* t = (T*)content-&gt;contents(i);
00827                         content-&gt;next(i);
00828                         content-&gt;del(t-&gt;key()); 
00829                         <span class="keyword">delete</span> t;
00830                 }
00831                 content-&gt;clear();
00832         }
00833 
<a name="l00834"></a><a class="code" href="classOidList.html#a17">00834</a>         <a class="code" href="classOidList.html">OidList</a>() { 
00835                 content = <span class="keyword">new</span> <a class="code" href="classOidxPtrEntryPtrAVLMap.html">OidxPtrEntryPtrAVLMap</a>(0); 
00836         }
<a name="l00837"></a><a class="code" href="classOidList.html#a18">00837</a>         ~<a class="code" href="classOidList.html">OidList</a>() { clearAll(); <span class="keyword">delete</span> content; }
00838 
00839 <span class="keyword">protected</span>:
00840 
<a name="l00841"></a><a class="code" href="classOidList.html#p0">00841</a>         <a class="code" href="classOidxPtrEntryPtrAVLMap.html">OidxPtrEntryPtrAVLMap</a>*  content;        
00842 };
00843 
00844 
<a name="l00845"></a><a class="code" href="classOidListCursor.html">00845</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOidListCursor.html">OidListCursor</a> {
00846 <span class="keyword">public</span>:
<a name="l00847"></a><a class="code" href="classOidListCursor.html#a0">00847</a>         <span class="keywordtype">void</span> init(<a class="code" href="classOidList.html">OidList&lt;T&gt;</a>* l) { 
00848                 list = l;
00849                 cursor = l-&gt;<a class="code" href="classOidList.html#p0">content</a>-&gt;<a class="code" href="classOidxPtrEntryPtrAVLMap.html#a5">first</a>(); 
00850         }
00851         
<a name="l00852"></a><a class="code" href="classOidListCursor.html#a1">00852</a>         <span class="keywordtype">void</span> initLast(<a class="code" href="classOidList.html">OidList&lt;T&gt;</a>* l) { 
00853                 list = l;
00854                 cursor = l-&gt;<a class="code" href="classOidList.html#p0">content</a>-&gt;<a class="code" href="classOidxPtrEntryPtrAVLMap.html#a13">last</a>(); 
00855         }
00856 
<a name="l00857"></a><a class="code" href="classOidListCursor.html#a2">00857</a>         T* get() {
00858                 <span class="keywordflow">if</span> ((list) &amp;&amp; (cursor)) 
00859                         <span class="keywordflow">return</span> (T*)list-&gt;content-&gt;contents(cursor);
00860                 <span class="keywordflow">else</span>
00861                         <span class="keywordflow">return</span> 0;
00862         }
00863 
<a name="l00864"></a><a class="code" href="classOidListCursor.html#a3">00864</a>         T* get_next() {
00865                 <span class="keywordflow">if</span> ((list) &amp;&amp; (cursor)) {
00866                         <a class="code" href="map_8h.html#a1">Pix</a> x = cursor;
00867                         list-&gt;content-&gt;next(x);
00868                         <span class="keywordflow">if</span> (x)
00869                                 <span class="keywordflow">return</span> (T*)list-&gt;content-&gt;contents(x);
00870                 }
00871                 <span class="keywordflow">return</span> 0;
00872         }
00873 
<a name="l00874"></a><a class="code" href="classOidListCursor.html#a4">00874</a>         T* get_prev() {
00875                 <span class="keywordflow">if</span> ((list) &amp;&amp; (cursor)) {
00876                         <a class="code" href="map_8h.html#a1">Pix</a> x = cursor;
00877                         list-&gt;content-&gt;prev(x);
00878                         <span class="keywordflow">if</span> (x)
00879                                 <span class="keywordflow">return</span> (T*)list-&gt;content-&gt;contents(x);
00880                 }
00881                 <span class="keywordflow">return</span> 0;
00882         }
00883 
<a name="l00884"></a><a class="code" href="classOidListCursor.html#a5">00884</a>         <span class="keywordtype">int</span> next() {
00885                 <span class="keywordflow">if</span> ((list) &amp;&amp; (cursor)) {
00886                         list-&gt;content-&gt;next(cursor);
00887                         <span class="keywordflow">return</span> (cursor) ? <a class="code" href="agent++_8h.html#a9">TRUE</a> : <a class="code" href="agent++_8h.html#a10">FALSE</a>;
00888                 } <span class="keywordflow">else</span> 
00889                         <span class="keywordflow">if</span> (cursor)
00890                                 cursor = 0;
00891                 <span class="keywordflow">return</span> 0;       
00892         }
00893 
<a name="l00894"></a><a class="code" href="classOidListCursor.html#a6">00894</a>         <span class="keywordtype">int</span> prev() {
00895                 <span class="keywordflow">if</span> ((list) &amp;&amp; (cursor)) {
00896                         list-&gt;content-&gt;prev(cursor);
00897                         <span class="keywordflow">return</span> (cursor) ? <a class="code" href="agent++_8h.html#a9">TRUE</a> : <a class="code" href="agent++_8h.html#a10">FALSE</a>;
00898                 } <span class="keywordflow">else</span> 
00899                         <span class="keywordflow">if</span> (cursor)
00900                                 cursor = 0;
00901                 <span class="keywordflow">return</span> 0;       
00902         }
00903 
<a name="l00904"></a><a class="code" href="classOidListCursor.html#a7">00904</a>         <span class="keywordtype">int</span> lookup(<a class="code" href="classOidx.html">Oidx</a>* oidptr) {
00905                 <span class="keywordflow">if</span> (list) {
00906                         <a class="code" href="map_8h.html#a1">Pix</a> i = list-&gt;content-&gt;seek_inexact(oidptr);
00907                         <span class="keywordflow">if</span> (!i) <span class="keywordflow">return</span> <a class="code" href="agent++_8h.html#a10">FALSE</a>;
00908                         T* t;
00909                         <span class="keywordflow">while</span> ((i) &amp;&amp; (t = (T*)list-&gt;content-&gt;contents(i)) &amp;&amp;
00910                                (*t-&gt;key() &gt; *oidptr)) {
00911                                 list-&gt;content-&gt;prev(i);
00912                         }
00913                         <span class="keywordflow">if</span> ((i) &amp;&amp; (t)) { 
00914                                 cursor = i;
00915                                 <span class="keywordflow">return</span> <a class="code" href="agent++_8h.html#a9">TRUE</a>;
00916                         }
00917                 }
00918                 <span class="keywordflow">return</span> <a class="code" href="agent++_8h.html#a10">FALSE</a>;
00919         }
00920 
<a name="l00921"></a><a class="code" href="classOidListCursor.html#a8">00921</a>         <a class="code" href="classOidListCursor.html">OidListCursor</a>(): cursor(0) { list = 0; }
<a name="l00922"></a><a class="code" href="classOidListCursor.html#a9">00922</a>         <a class="code" href="classOidListCursor.html">OidListCursor</a>(<a class="code" href="classOidList.html">OidList&lt;T&gt;</a>* l): 
00923           cursor(l-&gt;content-&gt;first()) { list = l; }
<a name="l00924"></a><a class="code" href="classOidListCursor.html#a10">00924</a>         <a class="code" href="classOidListCursor.html">OidListCursor</a>(<span class="keyword">const</span> <a class="code" href="classOidListCursor.html">OidListCursor&lt;T&gt;</a>&amp; c): cursor(c.cursor) 
00925           { list = c.list; }
00926 <span class="keyword">protected</span>:
<a name="l00927"></a><a class="code" href="classOidListCursor.html#p0">00927</a>         <a class="code" href="map_8h.html#a1">Pix</a>      cursor;
<a name="l00928"></a><a class="code" href="classOidListCursor.html#p1">00928</a>         <a class="code" href="classOidList.html">OidList&lt;T&gt;</a>* list;
00929 };
00930 
00931 
<a name="l00938"></a><a class="code" href="classArray.html">00938</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classArray.html">Array</a> {
00939 <span class="keyword">public</span>:
<a name="l00948"></a><a class="code" href="classArray.html#a0">00948</a>         T* addFirst(T* t) { 
00949                 T** h = content;
00950                 content = <span class="keyword">new</span> T*[sz+1];
00951                 memcpy(content+1, h, sz*<span class="keyword">sizeof</span>(T*));
00952                 content[0] = t;
00953                 <span class="keyword">delete</span>[] h;
00954                 sz++;
00955                 <span class="keywordflow">return</span> t;
00956         }
00957 
<a name="l00966"></a><a class="code" href="classArray.html#a1">00966</a>         T* addLast(T* t) {
00967                 T** h = content;
00968                 content = <span class="keyword">new</span> T*[sz+1];
00969                 memcpy(content, h, sz*<span class="keyword">sizeof</span>(T*));
00970                 content[sz++] = t;
00971                 <span class="keyword">delete</span>[] h;
00972                 <span class="keywordflow">return</span> t;
00973         }
00974 
<a name="l00983"></a><a class="code" href="classArray.html#a2">00983</a>         T* add(T* t)    { <span class="keywordflow">return</span> addLast(t); }
00984 
<a name="l00995"></a><a class="code" href="classArray.html#a3">00995</a>         T* insertBefore(T* item, T* elem) {
00996                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;sz; i++) {
00997                         <span class="keywordflow">if</span> (content[i] == elem) {
00998                                 <span class="keywordflow">if</span> (i == 0) <span class="keywordflow">return</span> addFirst(item);
00999                                 T** h = content;
01000                                 content = <span class="keyword">new</span> T*[sz+1];
01001                                 memcpy(content, h, i*<span class="keyword">sizeof</span>(T*));
01002                                 memcpy(content+i+1, h+i, 
01003                                        (sz-i)*<span class="keyword">sizeof</span>(T*)); 
01004                                 content[i] = item;
01005                                 <span class="keyword">delete</span>[] h;
01006                                 sz++;
01007                                 <span class="keywordflow">return</span> item;                    
01008                         }
01009                 } 
01010                 <span class="keywordflow">return</span> addLast(item);
01011         }
01012 
<a name="l01023"></a><a class="code" href="classArray.html#a4">01023</a>         T* insertAfter(T* item, T* elem) {
01024                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;sz; i++) {
01025                         <span class="keywordflow">if</span> (content[i] == elem) {
01026                                 <span class="keywordflow">if</span> (i == sz-1) <span class="keywordflow">return</span> addLast(item);
01027                                 T** h = content;
01028                                 content = <span class="keyword">new</span> T*[sz+1];
01029                                 memcpy(content, h, (i+1)*<span class="keyword">sizeof</span>(T*));
01030                                 <span class="keywordflow">if</span> (i+1&lt;sz) 
01031                                         memcpy(content+i+2, h+i+1, 
01032                                                (sz-i-1)*<span class="keyword">sizeof</span>(T*)); 
01033                                 content[i+1] = item;
01034                                 <span class="keyword">delete</span>[] h;
01035                                 sz++;
01036                                 <span class="keywordflow">return</span> item;                    
01037                         }
01038                 } 
01039                 <span class="keywordflow">return</span> addLast(item);
01040         }
01041 
<a name="l01048"></a><a class="code" href="classArray.html#a5">01048</a>         T* removeFirst() {
01049                 <span class="keywordflow">if</span> (sz == 0) <span class="keywordflow">return</span> 0; 
01050                 T* t = content[0];
01051                 T** h = content;
01052                 content = <span class="keyword">new</span> T*[--sz];
01053                 memcpy(content, h+1, sz*<span class="keyword">sizeof</span>(T*));
01054                 <span class="keyword">delete</span>[] h;
01055                 <span class="keywordflow">return</span> t;
01056         }
01057 
<a name="l01064"></a><a class="code" href="classArray.html#a6">01064</a>         T* removeLast() {
01065                 <span class="keywordflow">if</span> (sz &gt; 0)
01066                         <span class="keywordflow">return</span> content[--sz];
01067                 <span class="keywordflow">return</span> 0;
01068         }
01069 
<a name="l01073"></a><a class="code" href="classArray.html#a7">01073</a>         <span class="keywordtype">void</span> clearAll() {
01074                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;sz; i++) {
01075                         <span class="keyword">delete</span> content[i];
01076                 }
01077                 <span class="keyword">delete</span>[] content;
01078                 sz = 0;
01079                 content = <span class="keyword">new</span> T*[0];
01080         }
01081 
<a name="l01086"></a><a class="code" href="classArray.html#a8">01086</a>         <span class="keywordtype">void</span> clear() {
01087                 <span class="keyword">delete</span>[] content;
01088                 sz = 0;
01089                 content = <span class="keyword">new</span> T*[0];
01090         }
01091 
<a name="l01099"></a><a class="code" href="classArray.html#a9">01099</a>         <span class="keywordtype">void</span> clear(<span class="keywordtype">int</span> i) {
01100                 content[i] = 0;
01101         }
01102 
<a name="l01112"></a><a class="code" href="classArray.html#a10">01112</a>         T* remove(T* item) {
01113                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;sz; i++) {
01114                         <span class="keywordflow">if</span> (item == content[i]) {
01115                                 <span class="keywordflow">return</span> remove(i);
01116                         }
01117                 }
01118                 <span class="keywordflow">return</span> 0;
01119         }
01120 
<a name="l01130"></a><a class="code" href="classArray.html#a11">01130</a>         T* remove(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i) {
01131                 <span class="keywordflow">if</span> (i &gt;= sz) <span class="keywordflow">return</span> 0;
01132                 T* t = content[i];
01133                 T** h = content;
01134                 content = <span class="keyword">new</span> T*[sz-1];
01135                 <span class="keywordflow">if</span> (i &gt; 0)
01136                         memcpy(content, h, i*<span class="keyword">sizeof</span>(T*));
01137                 <span class="keywordflow">if</span> (i+1 &lt; sz)
01138                         memcpy(content+i, h+i+1,(sz-i-1)*<span class="keyword">sizeof</span>(T*));
01139                 <span class="keyword">delete</span>[] h;
01140                 sz--;
01141                 <span class="keywordflow">return</span> t;
01142         }
01143 
<a name="l01153"></a><a class="code" href="classArray.html#a12">01153</a>         T* getNth(<span class="keywordtype">int</span> n)<span class="keyword"> const </span>{
01154                 <span class="keywordflow">if</span> ((n &lt; 0) || (((unsigned int)n) &gt;= sz))  <span class="keywordflow">return</span> 0; 
01155                 <span class="keywordflow">return</span> content[n];
01156         }
01157 
<a name="l01167"></a><a class="code" href="classArray.html#a13">01167</a>         <span class="keywordtype">int</span> index(T* t)<span class="keyword"> const </span>{
01168                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;sz; i++) {
01169                         <span class="keywordflow">if</span> (t == content[i]) 
01170                                 <span class="keywordflow">return</span> i;
01171                 }
01172                 <span class="keywordflow">return</span> -1;
01173         }
01174                 
<a name="l01181"></a><a class="code" href="classArray.html#a14">01181</a>         T* first()<span class="keyword"> const        </span>{ <span class="keywordflow">return</span> (sz) ? content[0] : 0; }
<a name="l01188"></a><a class="code" href="classArray.html#a15">01188</a>         T* last()<span class="keyword"> const         </span>{ <span class="keywordflow">return</span> (sz) ? content[sz-1] : 0; }
01189 
<a name="l01201"></a><a class="code" href="classArray.html#a16">01201</a>         T* overwriteNth(<span class="keywordtype">int</span> n, T* t) {
01202                 <span class="keywordflow">if</span> ((n &lt; 0) || ((unsigned int)n &gt;= sz)) <span class="keywordflow">return</span> 0;
01203                 <span class="keywordflow">if</span> (content[n]) <span class="keyword">delete</span> content[n];
01204                 content[n] = t;
01205                 <span class="keywordflow">return</span> content[n];
01206         }
01207 
<a name="l01208"></a><a class="code" href="classArray.html#a17">01208</a>         T&amp; operator[](<span class="keywordtype">int</span> n)<span class="keyword"> const </span>{
01209                 <span class="keywordflow">return</span> *(content[n]);
01210         }
01211 
<a name="l01220"></a><a class="code" href="classArray.html#a18">01220</a>         <span class="keywordtype">int</span> trim(<span class="keywordtype">int</span> n) {
01221                 <span class="keywordtype">int</span> i=0;
01222                 <span class="keywordflow">for</span> (i=0; (i&lt;n) &amp;&amp; (sz &gt; 0); i++) {
01223                         T* t = removeLast();
01224                         <span class="keywordflow">if</span> (t) <span class="keyword">delete</span> t;
01225                         <span class="keywordflow">else</span> <span class="keywordflow">break</span>;
01226                 }
01227                 <span class="keywordflow">return</span> i;
01228         }
01229 
<a name="l01236"></a><a class="code" href="classArray.html#a19">01236</a>         <span class="keywordtype">int</span> size()<span class="keyword"> const </span>{
01237                 <span class="keywordflow">return</span> sz;
01238         }
01239 
<a name="l01247"></a><a class="code" href="classArray.html#a20">01247</a>         <span class="keywordtype">int</span> empty()<span class="keyword"> const </span>{
01248                 <span class="keywordflow">return</span> (sz == 0);
01249         }
01250 
<a name="l01254"></a><a class="code" href="classArray.html#a21">01254</a>         <a class="code" href="classArray.html">Array&lt;T&gt;</a>* clone() {
01255                 <a class="code" href="classArray.html">Array&lt;T&gt;</a>* r = <span class="keyword">new</span> <a class="code" href="classArray.html">Array&lt;T&gt;</a>();
01256                 <span class="keywordflow">if</span> (sz == 0) <span class="keywordflow">return</span> r;
01257                 r-&gt;<a class="code" href="classArray.html#p1">sz</a> = sz;
01258                 <span class="keyword">delete</span>[] r-&gt;<a class="code" href="classArray.html#p0">content</a>;
01259                 r-&gt;<a class="code" href="classArray.html#p0">content</a> = <span class="keyword">new</span> T*[sz];
01260                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;sz; i++) {
01261                         r-&gt;<a class="code" href="classArray.html#p0">content</a>[i] = (T*)content[i]-&gt;clone();
01262                 }
01263                 <span class="keywordflow">return</span> r;
01264         }
01265 
<a name="l01266"></a><a class="code" href="classArray.html#a22">01266</a>         <a class="code" href="classArray.html">Array&lt;T&gt;</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="classArray.html">Array&lt;T&gt;</a>&amp; o) {
01267                 <span class="keywordflow">if</span> (<span class="keyword">this</span> == &amp;o) <span class="keywordflow">return</span> *<span class="keyword">this</span>;
01268                 clearAll();
01269                 <span class="keyword">delete</span>[] content;
01270                 sz = o.<a class="code" href="classArray.html#p1">sz</a>;
01271                 content =  <span class="keyword">new</span> T*[sz];
01272                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;sz; i++) {
01273                         content[i] = (T*)o.<a class="code" href="classArray.html#p0">content</a>[i]-&gt;clone();
01274                 }
01275                 <span class="keywordflow">return</span> (*this);         
01276         }
01277 
<a name="l01281"></a><a class="code" href="classArray.html#a23">01281</a>         <a class="code" href="classArray.html">Array</a>(): sz(0) { content = <span class="keyword">new</span> T*[1]; }
01282         
<a name="l01286"></a><a class="code" href="classArray.html#a24">01286</a>         ~<a class="code" href="classArray.html">Array</a>()        { clearAll(); <span class="keyword">delete</span>[] content; }
01287 
01288 <span class="keyword">protected</span>:
01289 
<a name="l01290"></a><a class="code" href="classArray.html#p0">01290</a>         T**             content;
<a name="l01291"></a><a class="code" href="classArray.html#p1">01291</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    sz;
01292 };
01293 
01294 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOrderedArray.html">OrderedArray</a>;
01295 
<a name="l01296"></a><a class="code" href="classArrayCursor.html">01296</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classArrayCursor.html">ArrayCursor</a> {
01297 <span class="keyword">public</span>:
<a name="l01298"></a><a class="code" href="classArrayCursor.html#a0">01298</a>         <span class="keywordtype">void</span> init(<span class="keyword">const</span> <a class="code" href="classArray.html">Array&lt;T&gt;</a>* l) { 
01299                 cursor = 0; 
01300                 list = l;
01301         }
01302 
<a name="l01303"></a><a class="code" href="classArrayCursor.html#a1">01303</a>         <span class="keywordtype">void</span> initLast(<span class="keyword">const</span> <a class="code" href="classArray.html">Array&lt;T&gt;</a>* l) { 
01304                 list = l;
01305                 cursor = l-&gt;<a class="code" href="classArray.html#a19">size</a>()-1; 
01306         }
01307 
<a name="l01308"></a><a class="code" href="classArrayCursor.html#a2">01308</a>         T* get() {
01309                 <span class="keywordflow">if</span> ((cursor &lt; 0) || (cursor &gt;= list-&gt;size())) <span class="keywordflow">return</span> 0; 
01310                 <span class="keywordflow">return</span> list-&gt;getNth(cursor);
01311         }
01312 
<a name="l01313"></a><a class="code" href="classArrayCursor.html#a3">01313</a>         <span class="keywordtype">int</span> next() {
01314                 <span class="keywordflow">if</span> ((++cursor &gt;= list-&gt;size())) <span class="keywordflow">return</span> 0;
01315                 <span class="keywordflow">return</span> 1;       
01316         }
01317 
<a name="l01318"></a><a class="code" href="classArrayCursor.html#a4">01318</a>         <span class="keywordtype">int</span> prev() {
01319                 <span class="keywordflow">if</span> (--cursor &lt; 0) <span class="keywordflow">return</span> 0;
01320                 <span class="keywordflow">return</span> 1;
01321         }
01322 
<a name="l01323"></a><a class="code" href="classArrayCursor.html#a5">01323</a>         <span class="keywordtype">int</span> isNext() {
01324                 <span class="keywordflow">if</span> ((cursor+1 &gt;= list-&gt;size())) <span class="keywordflow">return</span> 0;
01325                 <span class="keywordflow">return</span> 1;       
01326         }
01327 
<a name="l01328"></a><a class="code" href="classArrayCursor.html#a6">01328</a>         <span class="keywordtype">int</span> isPrev() {
01329                 <span class="keywordflow">if</span> (cursor-1 &lt; 0) <span class="keywordflow">return</span> 0;
01330                 <span class="keywordflow">return</span> 1;
01331         }
01332 
<a name="l01333"></a><a class="code" href="classArrayCursor.html#a7">01333</a>         <span class="keywordtype">int</span> get_cursor() {
01334                 <span class="keywordflow">return</span> cursor;
01335         }
01336 
<a name="l01337"></a><a class="code" href="classArrayCursor.html#a8">01337</a>         <a class="code" href="classArrayCursor.html">ArrayCursor</a>(): cursor(0) { list = 0; };
<a name="l01338"></a><a class="code" href="classArrayCursor.html#a9">01338</a>         <a class="code" href="classArrayCursor.html">ArrayCursor</a>(<span class="keyword">const</span> <a class="code" href="classList.html">List&lt;T&gt;</a>* l): cursor(0) { list = l; };
<a name="l01339"></a><a class="code" href="classArrayCursor.html#a10">01339</a>         <a class="code" href="classArrayCursor.html">ArrayCursor</a>(<span class="keyword">const</span> <a class="code" href="classArrayCursor.html">ArrayCursor&lt;T&gt;</a>&amp; c): cursor(c.cursor) 
01340           { list = c.list; };
01341         
01342 <span class="keyword">protected</span>:
<a name="l01343"></a><a class="code" href="classArrayCursor.html#p0">01343</a>         <span class="keyword">const</span> <a class="code" href="classArray.html">Array&lt;T&gt;</a>* list;
<a name="l01344"></a><a class="code" href="classArrayCursor.html#p1">01344</a>         <span class="keywordtype">int</span>             cursor;
01345 };
01346 
01347 <span class="comment">//</span>
01348 <span class="comment">// OrderedList is implemented as a wrapper of List to avoid corrupting</span>
01349 <span class="comment">// the order by using directly methods of List</span>
01350 <span class="comment">//</span>
01351 
01352 <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOrderedArray.html">OrderedArray</a>;
01353 
<a name="l01354"></a><a class="code" href="classOrderedArray.html">01354</a> <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classOrderedArray.html">OrderedArray</a>: <span class="keyword">public</span> <a class="code" href="classArray.html">Array</a>&lt;T&gt; {
<a name="l01355"></a><a class="code" href="classOrderedArray.html#n0">01355</a> <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classArrayCursor.html">ArrayCursor</a>&lt;T&gt;;
01356 <span class="keyword">public</span>:
<a name="l01357"></a><a class="code" href="classOrderedArray.html#a0">01357</a>         T* addBegin(T* item) {
01358                 <span class="keywordflow">if</span> (!this-&gt;empty()) {
01359                         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;this-&gt;sz; i++) {
01360                                 <span class="keywordflow">if</span> (*item &lt; *(this-&gt;content[i]))
01361                                         <span class="keywordflow">return</span> insertBefore(item, 
01362                                                             this-&gt;content[i]);
01363                         }
01364                         <span class="keywordflow">return</span> <a class="code" href="classArray.html#a2">Array&lt;T&gt;::add</a>(item);
01365                 }
01366                 <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="classArray.html#a2">Array&lt;T&gt;::add</a>(item);
01367         }
01368 
<a name="l01369"></a><a class="code" href="classOrderedArray.html#a1">01369</a>         T* add(T* item) {
01370                 <span class="keywordflow">return</span> addEnd(item);
01371         }
01372 
<a name="l01373"></a><a class="code" href="classOrderedArray.html#a2">01373</a>         T* addEnd(T* item) {
01374                 <span class="keywordflow">if</span> (!this-&gt;empty()) {
01375                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=this-&gt;sz-1; i&gt;=0; i--) {
01376                                 <span class="keywordflow">if</span> (*item &gt; *(this-&gt;content[i]))
01377                                         <span class="keywordflow">return</span> insertAfter(item, 
01378                                                            this-&gt;content[i]);
01379                         }
01380                         <span class="keywordflow">return</span> <a class="code" href="classArray.html#a0">Array&lt;T&gt;::addFirst</a>(item);
01381                 }
01382                 <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="classArray.html#a0">Array&lt;T&gt;::addFirst</a>(item);
01383         }
01384 
01385         <span class="comment">// add a new item, but if an equal item already exists:</span>
01386         <span class="comment">// do not change the list, delete the new item and return 0 </span>
<a name="l01387"></a><a class="code" href="classOrderedArray.html#a3">01387</a>         T* addUnique(T* item) {
01388                 <span class="keywordflow">if</span> (!this-&gt;empty()) {
01389                         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;this-&gt;sz; i++) {
01390                                 <span class="keywordflow">if</span> (*item == *(this-&gt;content[i])) {
01391                                         <span class="keyword">delete</span> item;
01392                                         <span class="keywordflow">return</span> 0;
01393                                 }
01394                                 <span class="keywordflow">if</span> (*item &lt; *(this-&gt;content[i]))
01395                                         <span class="keywordflow">return</span> insertBefore(item, 
01396                                                             this-&gt;content[i]);
01397                         }
01398                         <span class="keywordflow">return</span> <a class="code" href="classArray.html#a2">Array&lt;T&gt;::add</a>(item);
01399                 }
01400                 <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="classArray.html#a2">Array&lt;T&gt;::add</a>(item);
01401         }
01402         <span class="comment">/*</span>
01403 <span class="comment">        OrderedArray&lt;T&gt;&amp; operator=(const OrderedArray&lt;T&gt;&amp; o) {</span>
01404 <span class="comment">                if (this == &amp;o) return *this;</span>
01405 <span class="comment">                clearAll();</span>
01406 <span class="comment">                delete[] content;</span>
01407 <span class="comment">                sz = o.sz;</span>
01408 <span class="comment">                content =  new T*[sz];</span>
01409 <span class="comment">                for (unsigned int i=0; i&lt;sz; i++) {</span>
01410 <span class="comment">                        content[i] = (T*)o.content[i]-&gt;clone();</span>
01411 <span class="comment">                }</span>
01412 <span class="comment">                return (*this);         </span>
01413 <span class="comment">                }*/</span>
01414 
01415 };
01416 
01417 <span class="preprocessor">#ifdef AGENTPP_NAMESPACE</span>
01418 <span class="preprocessor"></span>}
01419 <span class="preprocessor">#endif</span>
01420 <span class="preprocessor"></span>
01421 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Jan 13 00:13:06 2005 for AGENT++ by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.2 </small></address>
</body>
</html>
